<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Rider Socket Test - Static</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>

<body>
    <h1>Rider Socket.IO Static Test</h1>

    <div id="log"
        style="margin-top:20px; white-space: pre-wrap; border:1px solid #ccc; padding:10px; height:300px; overflow-y:scroll;">
    </div>

    <script>
        const logEl = document.getElementById('log');
        function log(msg) {
            logEl.textContent += msg + '\n';
            logEl.scrollTop = logEl.scrollHeight;
        }

        const socket = io('10.10.7.111:5000'); // server URL

        const riderId = '684ad7ccd465c48ea9061586'; // static rider ID
        const staticCoordinates = [90.4125, 23.8103]; // static lat,lng (Dhaka)

        socket.on('connect', () => {
            log(`‚úÖ Connected with socket ID: ${socket.id}`);

            // 1Ô∏è‚É£ Rider Online
            socket.emit('rider::online', riderId);
            log(`‚û°Ô∏è Sent rider::online for ${riderId}`);

            // 2Ô∏è‚É£ Rider Location Update
            socket.emit('rider::location_update', { riderId, coordinates: staticCoordinates }, (response) => {
                log('üìç Location Update Response: ' + JSON.stringify(response));
            });
            log(`‚û°Ô∏è Sent location update for ${riderId} => [${staticCoordinates}]`);
        });

        socket.on('rider::online::ack', (data) => {
            log('üì£ Online Ack: ' + JSON.stringify(data));
        });

        socket.on('disconnect', () => {
            log('‚ö†Ô∏è Disconnected from server');
        });
    </script>
</body>

</html>